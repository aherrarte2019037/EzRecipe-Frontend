<ngx-spinner template="<img class='w-32 h-32' src='../../../assets/spinner2.gif'/>" bdColor="rgba(255, 255, 255, 1)" [disableAnimation]="false" name="main"></ngx-spinner>

<app-navbar></app-navbar>

<ng-container *ngIf="showContent">
  <nb-layout class="home-layout">
    <nb-layout-column>

      <div class="flex space-x-9 justify-center w-full h-full lg:pb-7 md:pb-4">
        <div class="w-[25%] max-w-[222px] xl:max-w-[224px] flex flex-col justify-between xl:w-[15%]">

          <div class="w-full h-24 items-center flex justify-around user-card bg-white rounded-xl">
            <nb-user class="nb-user" picture="https://images.unsplash.com/photo-1485893086445-ed75865251e0?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NTJ8fGZhY2V8ZW58MHwyfDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" badgeText="Activo" badgeStatus="primary" badgePosition="bottom right" size="giant" name="Marta G" title="@Engineer">
            </nb-user>
          </div>

          <nb-card class="w-full !rounded-xl menu-card mt-5 px-5 py-3">
            <nb-menu class="navigation-menu" [items]="items"></nb-menu>

          </nb-card>

          <div class="flex w-full px-0.5 items-center justify-between">
            <span class="font-bold text-gray-500 text-[12px]">ANUNCIOS</span>
            <div class="relative mt-[-22px]">
              <nb-badge text="5" position="top right" status="danger"></nb-badge>
            </div>
          </div>

          <nb-card class="w-full !rounded-xl menu-card mt-2 !mb-0">
            <nb-card-body class="!p-3.5">
              <img src="../../../assets/adds.svg" class="!rounded-lg">
              <img class="absolute w-9 h-9 top-6 right-6" src="../../../assets/promotion.svg">
              <div class="flex justify-start items-center space-x-2">
                <button *ngIf="videoindex<3" (click)="open(dialog)" class="bg-pink-500 text-sm hover:bg-pink-600 text-white py-2 px-4 rounded-lg mt-3">
                  Ver v√≠deo
                </button>
                <button *ngIf="videoindex>2" (click)="open(dialog)" class="bg-gradient-to-r from-gray-400 to-gray-400 text-sm text-white py-2 px-4 rounded-lg mt-3" disabled>
                  Ver video
                </button>
                <button class="h-[38px] rounded-lg relative w-[38px] mt-3 bg-gray-200">
                  <nb-icon class="!absolute !w-5 !h-5 !top-[9px] !left-[9px]" icon="close-outline"></nb-icon>
                </button>
              </div>
            </nb-card-body>
          </nb-card>

        </div>

        <div class="w-[50%] xl:w-[70%]">
          <app-latest-recipes></app-latest-recipes>

          <div class="w-full flex justify-center">
            <div class="bg-white xl:w-1/2 w-full rounded-lg py-4 flex items-center justify-around">
              <span class="text-gray-400 text-[14px] xl:text-[15px] add-recipe-span">Quieres publicar una receta?</span>
              <button class="bg-blue-500 relative tracking-wide font-normal text-sm hover:bg-blue-600 text-white py-2 pl-8 pr-3.5 rounded-[10px]">
                <nb-icon class="absolute left-3 top-[9px] !w-[18px] !h-[18px]" icon="attach"></nb-icon>
                Crear
              </button>
            </div>
          </div>


          <router-outlet></router-outlet>
        </div>

        <div class="w-[25%] max-w-[222px] xl:max-w-[224px] xl:w-[15%] bg-green-200">
          <p>right</p>
        </div>
      </div>

    </nb-layout-column>
  </nb-layout>
</ng-container>

<ng-template #dialog let-data let-ref="dialogRef">
  <nb-card class="!p-2 !pt-4 !rounded-2xl">
    <nb-card-body>

      <iframe class="rounded-[15px]" width="560" height="315" [src]="videos[videoindex].link | safe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

    </nb-card-body>
    <nb-card-footer class="flex justify-end items-center !border-none">
      <button class="!rounded-xl" hero status="primary" [disabled]="disableModal" nbButton (click)="ref.close(); addThreeCoins()">EzCoins</button>
      <button class="ml-2 !rounded-xl" nbButton (click)="ref.close()">Cerrar</button>
    </nb-card-footer>
  </nb-card>
</ng-template>
